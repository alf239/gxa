#macro(mainMenu $menus)
    #if($menus && $menus.size()>0)
        <ul>
        #foreach($menu in $menus)
            #if($menu.name)
              <li><span>$menu.name</span>
              #if($menu.items && $menu.items.size() > 0)
                  <ul>
                  #foreach($item in $menu.items )
                      #menuItem($item)
                  #end</ul>
              #end</li>
            #end
          #end

        <li class="blank">&#xA0;</li></ul>
    #end
#end

#macro(menuItem $item)
    #set($active = "")
    #set($collapse = "")
    #set($currentItemHref = $PathTool.calculateLink($item.href, $relativePath))
    #set($currentItemHref = $currentItemHref.replaceAll( "\\", "/" ))
    #if($item && $item.items && $item.items.size() > 0)
        #if($item.collapse == false)
            #set($active = ' class ="active"' )
        #else
            #set ( $active = "" )
        #end

        #set($display = false)
        #displayTree($display $item)
        #if($alignedFileName == $currentItemHref || $display)
            #set($active = ' class ="active"' )
        #end
     #end

     #if($item && $item.items && $item.items.size() > 0 )
         #if ($active == ' class ="active"')
             #set($collapse = ' class ="expanded"')
         #else
             #set($collapse = ' class ="collapsed"')
         #end
     #end

     <li$collapse>

     #if ( $alignedFileName == $currentItemHref )
         <a href="$currentItemHref" class="active">$item.name</a>
     #else
         <a href="$currentItemHref"$active>$item.name</a>
     #end

     #if($item && $item.items && $item.items.size() > 0 )
         #if ($active == ' class ="active"')<ul>
            #foreach($subitem in $item.items)
                #menuItem($subitem)
            #end</ul>
         #end
     #end</li>
#end

#macro ( displayTree $display $item )
    #if ( $item && $item.items && $item.items.size() > 0 )
        #foreach( $subitem in $item.items )
            #set ( $subitemHref = $PathTool.calculateLink( $subitem.href, $relativePath ) )
            #set ( $subitemHref = $subitemHref.replaceAll( "\\", "/" ) )
            #if ( $alignedFileName == $subitemHref )
                #set ( $display = true )
            #end
            #displayTree( $display $subitem )
        #end
    #end
#end

#macro ( secondaryMenu $menus )
	#if ( $menus && $menus.size() > 0 )
		#foreach( $menu in $menus )
			#foreach( $item in $menu.items )
				#set ( $display = false )
				#displayTree( $display $item )
				#set ( $currentItemHref = $PathTool.calculateLink( $item.href, $relativePath ))
				#set ( $currentItemHref = $currentItemHref.replaceAll( "\\", "/" ) )
				#if($alignedFileName == $currentItemHref || $display == true)
					<ul>
						#if($alignedFileName == $currentItemHref)
							<li>$item.name</li>
						#else
							<li><a href="$currentItemHref">$item.name</a></li>
							#secondaryMenuItem( $item )
						#end
					</ul>
				#end
			#end
		#end
	#end
#end


#macro ( secondaryMenuItem $item )
	#if ( $item && $item.items && $item.items.size() > 0 )
		#foreach( $subItem in $item.items )
			#set ( $display = false )
			#displayTree( $display $subItem )
			#set ( $currentItemHref = $PathTool.calculateLink( $subItem.href, $relativePath ))
			#set ( $currentItemHref = $currentItemHref.replaceAll( "\\", "/" ) )
			#if($alignedFileName == $currentItemHref || $display == true)
				#if($alignedFileName == $currentItemHref)
					<li>/</li><li>$subItem.name</li>
				#else
					<li>/</li><li><a href="$currentItemHref">$subItem.name</a></li>
					#secondaryMenuItem( $subItem )
				#end
			#end
		#end
	#end
#end


#macro ( copyright )
  #if ( $project )
    #set ( $currentYear = ${currentDate.year} + 1900 )
    #if ( ${project.inceptionYear} && ( ${project.inceptionYear} != ${currentYear.toString()} ) )
      ${project.inceptionYear}-${currentYear}
    #else
      ${currentYear}
    #end
	&#169;
    #if ( ${project.organization} && ${project.organization.name} )
      ${project.organization.name}
    #end
  #end
#end

#macro ( poweredByLogo $poweredBy )
	#set($name = "")
    #if( $poweredBy )
        #foreach ($item in $poweredBy)
            #if( $item.name )
                #set ( $name = $item.name )
			#else
                #set ( $name = $i18n.getString( "site-renderer", $locale, "template.builtby" )  )
                #set ( $name = "${name} Maven"  )
            #end

        #end
        #if( $poweredBy.isEmpty() )
            #set ( $name = $i18n.getString( "site-renderer", $locale, "template.builtby" )  )
            #set ( $name = "${name} Maven"  )
        #end
    #else
       #set ( $name = $i18n.getString( "site-renderer", $locale, "template.builtby" )  )
       #set ( $name = "${name} Maven"  )
    #end
	$name
#end

#macro ( banner $banner $id )
  #if ( $banner )
    #if( $banner.href )
      <a href="$banner.href" id="$id">
    #else
        <span id="$id">
    #end

    #if( $banner.src )
        #set ( $src = $banner.src )
        #if ( ! ( $src.toLowerCase().startsWith("http") || $src.toLowerCase().startsWith("https") ) )
            #set ( $src = $PathTool.calculateLink( $src, $relativePath ) )
            #set ( $src = $src.replaceAll( "\\", "/" ) )
        #end
        #if ( $banner.alt )
            #set ( $alt = $banner.alt )
        #else
            #set ( $alt = "" )
        #end
        <img src="$src" alt="$alt" />
    #else
        $banner.name
    #end

    #if( $banner.href )
        </a>
    #else
        </span>
    #end
  #end
#end

#macro ( breadcrumbs $breadcrumbs )
  #set ( $counter = 0 )
  #foreach( $item in $breadcrumbs )
    #set ( $counter = $counter + 1 )
    #set ( $currentItemHref = $PathTool.calculateLink( $item.href, $relativePath ) )
    #set ( $currentItemHref = $currentItemHref.replaceAll( "\\", "/" ) )

    #if ( $currentItemHref == $alignedFileName || $currentItemHref == "" )
      $item.name
    #else
      #link( $currentItemHref $item.name )
    #end
    #if ( $breadcrumbs.size() > $counter )
      &gt;
    #end
  #end
#end

#macro ( links $links )
  #set ( $counter = 0 )
  #foreach( $item in $links )
    #set ( $counter = $counter + 1 )
    #set ( $currentItemHref = $PathTool.calculateLink( $item.href, $relativePath ) )
    #set ( $currentItemHref = $currentItemHref.replaceAll( "\\", "/" ) )
    #link( $currentItemHref $item.name )
  #end
#end

#macro ( link $href $name )
  #if ( ( $href.toLowerCase().startsWith("http") || $href.toLowerCase().startsWith("https") ) )
    <a href="$href" class="externalLink">$name</a>
  #else
    #if ($project.getName() == $name)
        <a class="sel" href="$href">$name</a>
    #else
        <a href="$href">$name</a>
    #end
  #end
#end

<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en">
	<head>
		<title>Gene Expression Atlas - Large Scale Meta-Analysis of Public Microarray Data</title>
		<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
        <style type="text/css" media="all">
            @import url("$relativePath/css/maven-base.css");
            @import url("$relativePath/css/default.css");
        </style>
	</head>
	<body>
		<div id="mainOuter">
			<div id="headerOuter">
                <div id="logo">
                    #banner( $decoration.bannerLeft "bannerLeft" )
                </div>
				<div id="topNav">
                    <div id="title">Gene Expression Atlas</div>
                    <div id="toplinks">
					    #links( $decoration.body.links )
                    </div>
					<!-- #secondaryMenu( $decoration.body.menus ) -->
				</div>
            </div>
			<div id="centerOuter">
				<!--content-->
				<div id="contentOuter">
					$bodyContent
				</div>
				<!--~content-->
				<div id="menuOuter">
					#mainMenu( $decoration.body.menus )
					<div id="poweredBy">
						<a href="http://maven.apache.org/" title="Built by Maven">
        		    		<img alt="Built by Maven" src="images/maven-feather.png">
				        </a>
					</div>
				</div>
			</div>
			<div class="clear">&#xA0;</div>
		</div>
		<div id="footerOuter">
			<span>#copyright()</span>
		</div>
	</body>
</html>

<?xml version="1.0" encoding="UTF-8"?>
<beans xmlns="http://www.springframework.org/schema/beans"
       xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
       xsi:schemaLocation="http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans.xsd">

  <bean id="atlasLoader"
        class="uk.ac.ebi.microarray.atlas.loader.AtlasMAGETABLoader">
    <property name="dataSource" ref="atlasDataSource" />
  </bean>

  <!--<bean id="atlasDataSource"-->
  <!--class="org.springframework.jdbc.datasource.SingleConnectionDataSource">-->
  <!--<property name="driverClassName" value="oracle.jdbc.OracleDriver" />-->
  <!--<property name="url" value="jdbc:oracle:thin:@apu.ebi.ac.uk:1521:AEDWT" />-->
  <!--<property name="username" value="atlas2" />-->
  <!--<property name="password" value="atlas2" />-->
  <!--<property name="autoCommit" value="false" />-->
  <!--</bean>-->

  <bean id="atlasDataSource"
        class="org.apache.commons.dbcp.BasicDataSource"
        destroy-method="close">
    <property name="driverClassName" value="oracle.jdbc.driver.OracleDriver" />
    <property name="url" value="jdbc:oracle:thin:@apu.ebi.ac.uk:1521:AEDWT" />
    <property name="username" value="atlas2" />
    <property name="password" value="atlas2" />
    <property name="defaultAutoCommit" value="false" />
    <property name="maxActive" value="50" />
    <property name="removeAbandoned" value="true" />
  </bean>

  <bean id="atlasIndex" class="java.io.File">
    <constructor-arg value="/home/tburdett/atlas/index" />
  </bean>

  <bean id="atlasNetCDFs" class="java.io.File">
    <constructor-arg value="/home/tburdett/atlas/netcdfs" />
  </bean>

  <!-- Requires an Index Builder -->
  <bean name="indexBuilder"
        class="uk.ac.ebi.ae3.indexbuilder.DefaultIndexBuilder">
    <!-- resource beans -->
    <property name="atlasDataSource" ref="atlasDataSource" />
    <property name="indexLocation" ref="atlasIndex" />
    <!-- configures behaviour of indexBuilder, whether we want genes and experiments -->
    <property name="includeGenes" value="false" />
    <property name="includeExperiments" value="true" />
  </bean>

  <bean name="netcdfGenerator"
        class="uk.ac.ebi.microarray.atlas.netcdf.DefaultNetCDFGenerator">
    <property name="atlasDataSource" ref="atlasDataSource" />
    <property name="repositoryLocation" ref="atlasNetCDFs" />
  </bean>

</beans>
alter table a2_software add  url VARCHAR2(255);
alter table a2_software add  ORGANISMID NUMBER(22,0);

ALTER TABLE a2_software
  ADD CONSTRAINT FK_SOFRWARE_ORGANISM
    FOREIGN KEY (ORGANISMID)
    REFERENCES A2_ORGANISM (ORGANISMID);

alter table a2_software add biomartorganismname VARCHAR2(255);
alter table a2_software add filename VARCHAR2(255);

CREATE TABLE A2_ANNOTATIONSRC2BETYPE(
  annoationsrcid NUMBER(22,0) CONSTRAINT NN_ANNOTATIONSRC2BETYPE_ANNSRCID NOT NULL
  , bioentitytypeid NUMBER(22,0) CONSTRAINT NN_ANNOTATIONSRC2BETYPE_BETYPEID NOT NULL);

ALTER TABLE A2_ANNOTATIONSRC2BETYPE
  ADD CONSTRAINT UQ_ANNOTATIONSRC2BETYPE
    UNIQUE(annoationsrcid, bioentitytypeid)
    ENABLE;

ALTER TABLE A2_ANNOTATIONSRC2BETYPE
  ADD CONSTRAINT FK_ANNOTATIONSRC2BETYPE_BIOENTITYTYPE
    FOREIGN KEY (BIOENTITYTYPEID)
    REFERENCES A2_BIOENTITYTYPE (BIOENTITYTYPEID)
    ON DELETE CASCADE
    ENABLE;

ALTER TABLE A2_ANNOTATIONSRC2BETYPE
  ADD CONSTRAINT FK_ANNOTATIONSRC2BETYPE_ANNSRC
    FOREIGN KEY (annoationsrcid)
    REFERENCES A2_SOFTWARE (SOFTWAREID)
    ON DELETE CASCADE
    ENABLE;

CREATE SEQUENCE  A2_BIOMARTPROPERTY_SEQ
    MINVALUE 1 MAXVALUE 1.00000000000000E+27
    INCREMENT BY 1 START WITH 1 CACHE 20
    NOORDER  NOCYCLE;

create table A2_BIOMARTPROPERTY (
  BIOMARTPROPERTYID NUMBER(22,0) CONSTRAINT NN_BIOMARTPROPERTY_ID NOT NULL
, BIOENTITYPROPERTYID NUMBER(22,0) CONSTRAINT NN_EP_BEPROPERTYID NOT NULL
, name VARCHAR2(255) CONSTRAINT NN_BIOMARTPROPERTY_NAME NOT NULL
);

ALTER TABLE A2_BIOMARTPROPERTY
  ADD CONSTRAINT PK_BIOMARTPROPERTY
    PRIMARY KEY (BIOMARTPROPERTYID)
    ENABLE;

ALTER TABLE A2_BIOMARTPROPERTY
  ADD CONSTRAINT FK_BIOMARTPROPERTY_PROPERTY
    FOREIGN KEY (BIOENTITYPROPERTYID)
    REFERENCES A2_BIOENTITYPROPERTY (BIOENTITYPROPERTYID)
    ON DELETE CASCADE
    ENABLE;

CREATE OR REPLACE TRIGGER A2_BIOMARTPROPERTY_INSERT
before insert on A2_BIOMARTPROPERTY
for each row
begin
if(:new.BIOMARTPROPERTYID is null) then
select A2_BIOMARTPROPERTY_SEQ.nextval into :new.BIOMARTPROPERTYID from dual;
end if;
end;

--
CREATE TABLE A2_ANNOTATIONSRC2BMPROPERTY(
  annoationsrcid NUMBER(22,0) CONSTRAINT NN_ANNOTATIONSRC2BMPROPERTY_ANNSRCID NOT NULL
  , BIOMARTPROPERTYID NUMBER(22,0) CONSTRAINT NN_ANNOTATIONSRC2BMPROPERTY_BMPROPID NOT NULL);

ALTER TABLE A2_ANNOTATIONSRC2BMPROPERTY
  ADD CONSTRAINT UQ_ANNOTATIONSRC2BMPROP
    UNIQUE(annoationsrcid, BIOMARTPROPERTYID)
    ENABLE;

ALTER TABLE A2_ANNOTATIONSRC2BMPROPERTY
  ADD CONSTRAINT FK_ANNOTATIONSRC2BETYPE_BIOMARTPROP
    FOREIGN KEY (BIOMARTPROPERTYID)
    REFERENCES A2_BIOMARTPROPERTY (BIOMARTPROPERTYID)
    ON DELETE CASCADE
    ENABLE;

ALTER TABLE A2_ANNOTATIONSRC2BETYPE
  ADD CONSTRAINT FK_NNOTATIONSRC2BMPROPERTY_ANNSRC
    FOREIGN KEY (annoationsrcid)
    REFERENCES A2_SOFTWARE (SOFTWAREID)
    ON DELETE CASCADE
    ENABLE;


